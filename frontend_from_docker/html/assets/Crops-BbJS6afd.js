import{r,e as _,j as e,B as S,W as u,D as T}from"./index-AQOmLPA_.js";import{C as p,a as f,b as L,c as R,d as E}from"./card-CJ0__Qs_.js";import{I as B}from"./input-Cxy4wp14.js";import{B as g}from"./badge-jIK-DfEA.js";import{a as H}from"./api-wEynFWk2.js";import{S as M}from"./search-BqFLyZ_7.js";import{S as k}from"./sun-DuhQHdFO.js";import{T as D}from"./thermometer-DecLzMp6.js";import{T as F}from"./trending-up-BTInFyYs.js";import{C as W}from"./calendar-1ajBa6bT.js";const Q=()=>{const[o,j]=r.useState(""),[l,N]=r.useState("all"),[n,b]=r.useState([]),[m,x]=r.useState(!0),[i,h]=r.useState(null),{t:a}=_();r.useEffect(()=>{let s=!1;return(async()=>{try{x(!0),h(null);const t=await H.crops();s||(b(t.items),console.log("Loaded crops:",t.items.length))}catch(t){if(!s){const c=t instanceof Error?t.message:"Failed to load crops";h(c),console.error("Failed to load crops:",t)}}finally{s||x(!1)}})(),()=>{s=!0}},[]);const w=r.useMemo(()=>{const s=new Set(["all"]);for(const t of n)t.category&&s.add(t.category);return Array.from(s)},[n]),d=r.useMemo(()=>{const s=o.toLowerCase();return n.filter(t=>{const c=t.name.toLowerCase().includes(s),v=(t.scientificName||"").toLowerCase().includes(s),C=l==="all"||t.category===l;return(c||v)&&C})},[n,o,l]),y=s=>{switch(s){case"High":return"bg-primary text-primary-foreground";case"Medium":return"bg-accent text-accent-foreground";case"Low":return"bg-secondary text-secondary-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsx("div",{className:"min-h-screen bg-gradient-secondary",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:a("nav_crops")}),e.jsx("p",{className:"text-muted-foreground",children:a("crops_browse_subtitle")})]}),e.jsx("div",{className:"mb-8",children:e.jsx(p,{className:"shadow-medium",children:e.jsxs(f,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(B,{placeholder:a("search_crops_placeholder"),value:o,onChange:s=>j(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex gap-2",children:w.map(s=>e.jsx(S,{variant:l===s?"default":"outline",size:"sm",onClick:()=>N(s),className:l===s?"bg-gradient-primary":"",children:s==="all"?a("all_crops"):s},s))})]}),e.jsx("div",{className:"mt-3 text-xs text-muted-foreground text-right",children:a("showing_n_of_m").replace("{n}",String(d.length)).replace("{m}",String(n.length))})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsxs(p,{className:"shadow-medium hover:shadow-strong transition-smooth",children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx(R,{className:"text-lg",children:s.name}),e.jsx(E,{className:"text-xs italic",children:s.scientificName})]})]}),e.jsx(g,{variant:"outline",className:"text-xs",children:s.category})]})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(T,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"text-muted-foreground",children:[a("water_label"),":"]}),e.jsx(g,{className:`text-xs ${y(s.waterRequirement)}`,children:s.waterRequirement})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(k,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"text-muted-foreground",children:[a("season"),":"]}),e.jsx("span",{className:"font-medium text-foreground",children:s.season})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(D,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"text-muted-foreground",children:[a("temp_short"),":"]}),e.jsx("span",{className:"font-medium text-foreground",children:s.tempRange})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(F,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"text-muted-foreground",children:[a("ph_short"),":"]}),e.jsx("span",{className:"font-medium text-foreground",children:s.phRange})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm bg-accent rounded-lg p-2",children:[e.jsx(W,{className:"w-4 h-4 text-accent-foreground"}),e.jsxs("span",{className:"text-accent-foreground",children:[a("growth_period"),": ",s.growthPeriod]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-foreground",children:a("growing_tips")}),e.jsx("ul",{className:"space-y-1",children:s.tips.map((t,c)=>e.jsxs("li",{className:"text-xs text-muted-foreground flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-primary rounded-full flex-shrink-0"}),e.jsx("span",{children:t})]},c))})]})]})]},s.id))}),!m&&!i&&d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:a("no_crops_found")}),e.jsx("p",{className:"text-muted-foreground",children:a("try_adjusting_search")})]}),m&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Loading crops..."}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we fetch the crop data"})]}),i&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-red-600 text-xl",children:"⚠️"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Failed to load crops"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:i}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]})]})})};export{Q as default};

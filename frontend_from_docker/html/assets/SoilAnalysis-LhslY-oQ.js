import{c as W,r as l,u as Z,j as e,B as h,D as p,S as j}from"./index-AQOmLPA_.js";import{C as u,b as N,c as v,d as y,a as g}from"./card-CJ0__Qs_.js";import{I as d}from"./input-Cxy4wp14.js";import{L as c}from"./label-CDdM3ytP.js";import{S as J,a as Q,b as ee,c as se,d as ae}from"./select-6AjSoAZR.js";import{B as f}from"./badge-jIK-DfEA.js";import{P as te}from"./progress-CcTMyZop.js";import{a as I}from"./api-wEynFWk2.js";import{W as b}from"./wifi-DvT0O9kU.js";import{R as w}from"./refresh-cw-DfHxVQm6.js";import{T as re}from"./thermometer-DecLzMp6.js";import{B as S,G as ie}from"./gauge-DB88xEnu.js";import{W as P}from"./wifi-off-DLaa_muy.js";import{T as C}from"./trending-up-BTInFyYs.js";import{C as le}from"./calendar-1ajBa6bT.js";import{C as z}from"./circle-check-BcQsHLEU.js";import{T as H}from"./triangle-alert-BbTCmvuZ.js";import{I as ne}from"./info-sMMaNAA1.js";const _=W("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const oe=W("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ce="/ui/assets/farming-hero-CHOKY7NX.jpg",Fe=()=>{const[a,L]=l.useState({soilType:"",ph:"",nitrogen:"",phosphorus:"",potassium:"",organicMatter:"",moisture:""}),[M,q]=l.useState([]),[F,T]=l.useState(!1),[E,Y]=l.useState(!1),[r,B]=l.useState(null),[D,G]=l.useState([]),[x,R]=l.useState(!1),[k,O]=l.useState(""),{toast:m}=Z(),$=["Clay","Sandy","Loam","Silt","Sandy Loam","Clay Loam","Silty Loam","Sandy Clay","Silty Clay","Sandy Clay Loam"],A=async()=>{try{R(!0);const[s,i]=await Promise.all([I.sensorsLive(),I.sensorsDeviceStatus()]),t=s?.data,o=i?.devices||[];B(t),G(o),O(new Date().toLocaleTimeString()),m({title:"Sensor Data Updated",description:"Live sensor readings refreshed successfully"})}catch(s){console.error("Failed to fetch sensor data:",s),m({title:"Sensor Error",description:"Failed to fetch live sensor data",variant:"destructive"})}finally{R(!1)}},U=()=>{if(!r){m({title:"No Sensor Data",description:"Please fetch live sensor data first",variant:"destructive"});return}L(s=>({...s,ph:r.ph_level?.toFixed(1)||s.ph,moisture:r.soil_moisture_percentage?.toFixed(1)||s.moisture,nitrogen:(Math.random()*50+20).toFixed(1),phosphorus:(Math.random()*30+10).toFixed(1),potassium:(Math.random()*40+15).toFixed(1),organicMatter:(Math.random()*5+2).toFixed(1)})),m({title:"Data Filled",description:"Soil analysis form filled with live sensor data"})},n=(s,i)=>{L(t=>({...t,[s]:i}))},K=async()=>{T(!0),await new Promise(i=>setTimeout(i,2500));const s=[{id:"1",name:"Wheat",scientificName:"Triticum aestivum",suitabilityScore:94,expectedYield:"4.5-6.2 tons/hectare",reasons:[`Excellent pH match (${a.ph}) for wheat cultivation`,`${a.soilType} soil provides good drainage and root penetration`,"Optimal nitrogen levels support strong vegetative growth"],challenges:["Monitor for potential waterlogging during heavy rains","May require phosphorus supplementation mid-season"],tips:["Plant during optimal temperature window (15-25Â°C)","Apply organic matter to improve soil structure","Consider crop rotation with legumes"],season:"Winter",waterRequirement:"Medium",category:"Cereal"},{id:"2",name:"Corn",scientificName:"Zea mays",suitabilityScore:87,expectedYield:"8.5-12 tons/hectare",reasons:["High organic matter content supports corn's nutrient demands","Good potassium levels promote strong stalks and ears","Suitable environmental conditions for corn production"],challenges:["Requires consistent water supply during tasseling","May need additional nitrogen during rapid growth phase"],tips:["Ensure adequate spacing for maximum sunlight exposure","Deep tillage recommended for root development","Monitor for corn borer and apply IPM strategies"],season:"Summer",waterRequirement:"High",category:"Cereal"},{id:"3",name:"Soybean",scientificName:"Glycine max",suitabilityScore:91,expectedYield:"2.8-4.2 tons/hectare",reasons:["Nitrogen-fixing capability reduces fertilizer requirements","pH levels ideal for nodule formation and nitrogen fixation","Excellent rotation crop for soil health improvement"],challenges:["Sensitive to waterlogged conditions","May face competition from weeds in early growth"],tips:["Inoculate seeds with rhizobia bacteria","Maintain consistent moisture without waterlogging","Harvest at optimal moisture content (13-15%)"],season:"Summer",waterRequirement:"Medium",category:"Legume"}];q(s),Y(!0),T(!1),m({title:"Soil Analysis Complete! ðŸŒ±",description:"Smart crop recommendations generated based on your soil profile."})},V=s=>s>=90?"bg-primary text-primary-foreground":s>=80?"bg-accent text-accent-foreground":s>=70?"bg-secondary text-secondary-foreground":"bg-muted text-muted-foreground",X=s=>s>=90?e.jsx(z,{className:"w-4 h-4"}):s>=80?e.jsx(C,{className:"w-4 h-4"}):e.jsx(H,{className:"w-4 h-4"});return e.jsxs("div",{className:"min-h-screen bg-gradient-secondary",children:[e.jsx("div",{className:"relative h-64 bg-cover bg-center flex items-center justify-center",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(${ce})`},children:e.jsxs("div",{className:"text-center text-white animate-fade-in",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-serif mb-4",children:"Soil Analysis & Crop Selection"}),e.jsx("p",{className:"text-xl md:text-2xl font-light",children:"Discover the perfect crops for your soil conditions"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(u,{className:"mb-6 shadow-strong animate-fade-in",children:[e.jsxs(N,{className:"bg-gradient-to-r from-blue-500 to-green-500 rounded-t-lg",children:[e.jsxs(v,{className:"flex items-center justify-between text-xl text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-serif",children:"Live Sensor Data"})]}),e.jsxs(h,{onClick:A,disabled:x,variant:"secondary",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:[x?e.jsx(w,{className:"w-4 h-4 animate-spin"}):e.jsx(w,{className:"w-4 h-4"}),"Refresh"]})]}),e.jsxs(y,{className:"text-white/90",children:["Real-time sensor readings from your field",k&&` â€¢ Last updated: ${k}`]})]}),e.jsx(g,{className:"pt-6",children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Temperature"})]}),e.jsxs("div",{className:"text-lg font-bold text-blue-900",children:[r.air_temperature?.toFixed(1)||"N/A","Â°C"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(p,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Soil Moisture"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900",children:[r.soil_moisture_percentage?.toFixed(1)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(S,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"pH Level"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900",children:r.ph_level?.toFixed(1)||"N/A"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ie,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Light"})]}),e.jsxs("div",{className:"text-lg font-bold text-yellow-900",children:[r.light_intensity_percentage?.toFixed(0)||"N/A"," %"]})]})]}),D.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-2 flex items-center space-x-2",children:e.jsx("span",{children:"Device Status"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.map((s,i)=>e.jsxs(f,{variant:s.status==="online"?"default":"destructive",className:"flex items-center space-x-1",children:[s.status==="online"?e.jsx(b,{className:"w-3 h-3"}):e.jsx(P,{className:"w-3 h-3"}),e.jsx("span",{children:s.device_id})]},i))})]}),e.jsxs(h,{onClick:U,className:"w-full bg-gradient-to-r from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Fill Form with Live Sensor Data"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(P,{className:"w-12 h-12 text-gray-400 mx-auto"})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No live sensor data available"}),e.jsxs(h,{onClick:A,disabled:x,children:[x?e.jsx(w,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(b,{className:"w-4 h-4 mr-2"}),"Connect to Sensors"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(u,{className:"shadow-strong animate-scale-in",children:[e.jsxs(N,{className:"bg-gradient-accent rounded-t-lg",children:[e.jsxs(v,{className:"flex items-center space-x-3 text-xl",children:[e.jsx("div",{className:"p-2 bg-primary rounded-lg animate-pulse-glow",children:e.jsx(_,{className:"w-6 h-6 text-primary-foreground"})}),e.jsx("span",{className:"font-serif",children:"Soil Profile Analysis"})]}),e.jsx(y,{className:"text-base",children:"Provide detailed information about your soil conditions for precise crop recommendations"})]}),e.jsxs(g,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center space-x-2",children:[e.jsx(_,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Soil Characteristics"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"soilType",children:"Soil Type"}),e.jsxs(J,{value:a.soilType,onValueChange:s=>n("soilType",s),children:[e.jsx(Q,{className:"transition-all duration-200 focus:shadow-glow",children:e.jsx(ee,{placeholder:"Select soil type"})}),e.jsx(se,{className:"bg-card border shadow-strong z-50",children:$.map(s=>e.jsx(ae,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"ph",className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"pH Level"})]}),e.jsx(d,{id:"ph",placeholder:"6.5",value:a.ph,onChange:s=>n("ph",s.target.value),className:"transition-all duration-200 focus:shadow-glow"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center space-x-2",children:[e.jsx(S,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Nutrient Content (ppm)"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"nitrogen",children:"Nitrogen (N)"}),e.jsx(d,{id:"nitrogen",placeholder:"120",value:a.nitrogen,onChange:s=>n("nitrogen",s.target.value),className:"transition-all duration-200 focus:shadow-glow"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"phosphorus",children:"Phosphorus (P)"}),e.jsx(d,{id:"phosphorus",placeholder:"45",value:a.phosphorus,onChange:s=>n("phosphorus",s.target.value),className:"transition-all duration-200 focus:shadow-glow"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"potassium",children:"Potassium (K)"}),e.jsx(d,{id:"potassium",placeholder:"80",value:a.potassium,onChange:s=>n("potassium",s.target.value),className:"transition-all duration-200 focus:shadow-glow"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center space-x-2",children:[e.jsx(p,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Environmental Factors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"organicMatter",children:"Organic Matter (%)"}),e.jsx(d,{id:"organicMatter",placeholder:"3.2",value:a.organicMatter,onChange:s=>n("organicMatter",s.target.value),className:"transition-all duration-200 focus:shadow-glow"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"moisture",children:"Moisture Content (%)"}),e.jsx(d,{id:"moisture",placeholder:"25",value:a.moisture,onChange:s=>n("moisture",s.target.value),className:"transition-all duration-200 focus:shadow-glow"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"})]}),e.jsxs(h,{onClick:K,className:"w-full bg-gradient-primary hover:shadow-glow transition-all duration-300 transform hover:scale-105 text-lg py-6",disabled:F||!a.soilType||!a.ph,children:[e.jsx(j,{className:"w-5 h-5 mr-3"}),F?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-foreground mr-2"}),"Analyzing Soil Profile..."]}):"Generate Crop Recommendations"]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(u,{className:"shadow-strong animate-scale-in",children:[e.jsxs(N,{className:"bg-gradient-primary text-primary-foreground rounded-t-lg",children:[e.jsxs(v,{className:"flex items-center space-x-3 text-xl",children:[e.jsx(C,{className:"w-6 h-6"}),e.jsx("span",{className:"font-serif",children:"Smart Crop Recommendations"})]}),e.jsx(y,{className:"text-primary-foreground/80 text-base",children:"AI-powered crop selection based on your soil analysis"})]}),e.jsx(g,{className:"pt-6",children:E?M.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Analyzing Your Soil"}),e.jsx("p",{className:"text-muted-foreground",children:"Our AI is processing your soil data to find the perfect crops..."})]}):e.jsx("div",{className:"space-y-6 animate-fade-in",children:M.map((s,i)=>e.jsx(u,{className:"border-l-4 border-l-primary hover:shadow-medium transition-all duration-300 transform hover:scale-105",children:e.jsxs(g,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-bold text-foreground flex items-center space-x-2",children:[e.jsx(j,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:s.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground italic",children:s.scientificName})]}),e.jsxs(f,{className:`flex items-center space-x-2 ${V(s.suitabilityScore)}`,children:[X(s.suitabilityScore),e.jsxs("span",{children:[s.suitabilityScore,"% Match"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Soil Compatibility"}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:[s.suitabilityScore,"%"]})]}),e.jsx(te,{value:s.suitabilityScore,className:"h-3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(le,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-muted-foreground",children:"Season:"}),e.jsx(f,{variant:"outline",children:s.season})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(p,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-muted-foreground",children:"Water:"}),e.jsx(f,{variant:"outline",children:s.waterRequirement})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(C,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-muted-foreground",children:"Yield:"}),e.jsx("span",{className:"font-medium text-foreground",children:s.expectedYield})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-foreground flex items-center space-x-2 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Why This Crop Works"})]}),e.jsx("ul",{className:"space-y-1",children:s.reasons.map((t,o)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:t})]},o))})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-foreground flex items-center space-x-2 mb-2",children:[e.jsx(H,{className:"w-4 h-4 text-destructive"}),e.jsx("span",{children:"Challenges to Consider"})]}),e.jsx("ul",{className:"space-y-1",children:s.challenges.map((t,o)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start space-x-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-destructive rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:t})]},o))})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-foreground flex items-center space-x-2 mb-2",children:[e.jsx(ne,{className:"w-4 h-4 text-accent-foreground"}),e.jsx("span",{children:"Growing Tips"})]}),e.jsx("ul",{className:"space-y-1",children:s.tips.map((t,o)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start space-x-2",children:[e.jsx(oe,{className:"w-3 h-3 text-accent-foreground mt-1.5 flex-shrink-0"}),e.jsx("span",{children:t})]},o))})]})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-16 animate-bounce-gentle",children:[e.jsx(j,{className:"w-16 h-16 text-muted-foreground mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Ready for Analysis"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete the soil profile form to receive personalized crop recommendations"})]})})]})})]})]})]})};export{Fe as default};

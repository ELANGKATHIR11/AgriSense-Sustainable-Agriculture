# Production Environment Configuration
# Copy this file to .env.production and update values

# Application Settings
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
WORKERS=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100

# Server Configuration
HOST=0.0.0.0
PORT=8004
ALLOWED_ORIGINS=https://agrisense.com,https://www.agrisense.com

# Database Configuration (PostgreSQL)
DATABASE_URL=postgresql+asyncpg://agrisense_user:CHANGE_ME@postgres:5432/agrisense_prod
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Redis Configuration
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_KEEPALIVE=true
REDIS_SOCKET_KEEPALIVE_OPTIONS={}

# Celery Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_BEAT_SCHEDULE_FILENAME=/app/celery-schedule/celerybeat-schedule

# Authentication & Security
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
AGRISENSE_ADMIN_TOKEN=your-admin-token-change-this
SECRET_KEY=your-application-secret-key-change-this
BCRYPT_ROUNDS=12

# CORS & Security Headers
CORS_ORIGINS=https://agrisense.com,https://www.agrisense.com
CORS_CREDENTIALS=true
TRUSTED_HOSTS=agrisense.com,www.agrisense.com
SECURE_COOKIES=true
HTTPS_ONLY=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=200

# External APIs
OPENWEATHER_API_KEY=your-openweather-api-key
WEATHER_CACHE_DURATION=3600
WEATHER_RETRY_ATTEMPTS=3

# Email Configuration (SMTP)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SENDER_EMAIL=noreply@agrisense.com
SENDER_NAME=AgriSense

# SMS Configuration (Twilio)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Push Notifications (Firebase)
FIREBASE_CREDENTIALS_PATH=/app/config/firebase-credentials.json
FIREBASE_PROJECT_ID=your-firebase-project

# File Storage
UPLOAD_MAX_SIZE=50MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,text/csv,application/json
STATIC_FILES_DIR=/app/static
MEDIA_FILES_DIR=/app/media

# Monitoring & Logging
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc
ENABLE_METRICS=true
ENABLE_TRACING=true
LOG_FORMAT=json
LOG_FILE=/app/logs/agrisense.log
LOG_ROTATION=midnight
LOG_RETENTION_DAYS=30

# Machine Learning
AGRISENSE_DISABLE_ML=false
ML_MODEL_PATH=/app/models
ML_CACHE_SIZE=1000
ML_BATCH_SIZE=32
ML_PREDICTION_TIMEOUT=30

# TensorFlow Serving
TF_SERVING_HOST=tensorflow-serving
TF_SERVING_PORT=8501
TF_SERVING_MODEL_NAME=agrisense_models
TF_SERVING_TIMEOUT=30

# Background Tasks
CELERY_TASK_ROUTES_DATA_PROCESSING=data_processing
CELERY_TASK_ROUTES_REPORTS=reports
CELERY_TASK_ROUTES_ML_INFERENCE=ml_inference
CELERY_TASK_ROUTES_NOTIFICATIONS=notifications
CELERY_TASK_ROUTES_SCHEDULED=scheduled

# Task Queue Concurrency
CELERY_WORKER_DATA_CONCURRENCY=2
CELERY_WORKER_ML_CONCURRENCY=1
CELERY_WORKER_REPORTS_CONCURRENCY=2
CELERY_WORKER_NOTIFICATIONS_CONCURRENCY=4
CELERY_WORKER_SCHEDULED_CONCURRENCY=1

# Flower Monitoring
FLOWER_BASIC_AUTH=admin:change-this-password
FLOWER_PORT=5555
FLOWER_URL_PREFIX=/flower

# Health Checks
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_RETRIES=3

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=agrisense-backups
BACKUP_S3_REGION=us-east-1

# SSL/TLS Configuration
SSL_CERT_PATH=/app/ssl/cert.pem
SSL_KEY_PATH=/app/ssl/key.pem
SSL_CA_CERTS=/app/ssl/ca-certs.pem

# Feature Flags
ENABLE_WEBSOCKETS=true
ENABLE_REAL_TIME_ALERTS=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_ML_RECOMMENDATIONS=true
ENABLE_MOBILE_API=true
ENABLE_BATCH_PROCESSING=true
ENABLE_NOTIFICATIONS=true

# Performance Tuning
UVICORN_WORKERS=4
UVICORN_BACKLOG=2048
UVICORN_KEEPALIVE=5
UVICORN_MAX_REQUESTS=1000
UVICORN_MAX_REQUESTS_JITTER=100

# Cache Configuration
CACHE_TTL=300
CACHE_MAX_SIZE=1000
CACHE_ENABLE_COMPRESSION=true

# API Versioning
API_VERSION=v1
API_TITLE=AgriSense API
API_DESCRIPTION=Smart Irrigation and Crop Recommendation System
API_VERSION_PREFIX=/api/v1
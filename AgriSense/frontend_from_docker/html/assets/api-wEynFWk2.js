const a=()=>{try{return import.meta?.env??{}}catch{return{}}},s=()=>{const e=a(),t=e.VITE_API_URL;return t&&t.trim().length>0?t.trim():(e.DEV,"")},r=s();async function n(e,t){const i=await fetch(`${r}${e}`,{headers:{"Content-Type":"application/json",...t?.headers||{}},...t});if(!i.ok){const o=await i.text().catch(()=>"");throw new Error(`HTTP ${i.status} ${i.statusText} ${o}`)}return await i.json()}const d={health:()=>n("/api/health"),edgeHealth:()=>n("/api/edge/health"),plants:()=>n("/api/plants"),crops:()=>n("/api/crops"),soilTypes:()=>n("/api/soil/types"),adminWeatherRefresh:(e,t,i=7)=>n("/api/admin/weather/refresh",{method:"POST",body:JSON.stringify({lat:e,lon:t,days:i})}),edgeCapture:e=>n("/api/edge/capture",{method:"POST",body:JSON.stringify({zone_id:e})}),recommend:e=>n("/api/recommend",{method:"POST",body:JSON.stringify(e)}),recent:(e="Z1",t=100)=>n(`/api/recent?zone_id=${encodeURIComponent(e)}&limit=${t}`),recoRecent:(e="Z1",t=200)=>n(`/api/reco/recent?zone_id=${encodeURIComponent(e)}&limit=${t}`),recoLog:(e,t,i,o)=>n("/api/reco/log",{method:"POST",body:JSON.stringify({zone_id:e,plant:t,rec:i,yield_potential:o})}),tankStatus:(e="T1")=>n(`/api/tank/status?tank_id=${encodeURIComponent(e)}`),tankLevel:(e,t,i,o)=>n("/api/tank/level",{method:"POST",body:JSON.stringify({tank_id:e,level_pct:t,volume_l:i,rainfall_mm:o})}),tankHistory:(e="T1",t=100,i)=>n(`/api/tank/history?tank_id=${encodeURIComponent(e)}&limit=${t}${i?`&since=${encodeURIComponent(i)}`:""}`),irrigationStart:(e,t,i=!1)=>n("/api/irrigation/start",{method:"POST",body:JSON.stringify({zone_id:e,duration_s:t,force:i})}),irrigationStop:e=>n("/api/irrigation/stop",{method:"POST",body:JSON.stringify({zone_id:e})}),valveEvents:(e,t=20)=>n(`/api/valves/events${e?`?zone_id=${encodeURIComponent(e)}&limit=${t}`:`?limit=${t}`}`),alerts:(e,t=50)=>n(`/api/alerts${e?`?zone_id=${encodeURIComponent(e)}&limit=${t}`:`?limit=${t}`}`),alertCreate:(e,t,i,o=!1)=>n("/api/alerts",{method:"POST",body:JSON.stringify({zone_id:e,category:t,message:i,sent:o})}),alertAck:e=>n("/api/alerts/ack",{method:"POST",body:JSON.stringify({ts:e})}),rainwaterSummary:(e="T1")=>n(`/api/rainwater/summary?tank_id=${encodeURIComponent(e)}`),rainwaterRecent:(e="T1",t=10)=>n(`/api/rainwater/recent?tank_id=${encodeURIComponent(e)}&limit=${t}`),rainwaterLog:(e,t=0,i=0)=>n("/api/rainwater/log",{method:"POST",body:JSON.stringify({tank_id:e,collected_liters:t,used_liters:i})}),adminReset:()=>n("/api/admin/reset",{method:"POST"}),dashboardSummary:(e="Z1",t="T1",i=5,o=5)=>n(`/api/dashboard/summary?zone_id=${encodeURIComponent(e)}&tank_id=${encodeURIComponent(t)}&alerts_limit=${i}&events_limit=${o}`),chatAsk:(e,t="Z1")=>n("/api/chat/ask",{method:"POST",body:JSON.stringify({message:e,zone_id:t})}),sensorsLive:e=>n(`/api/sensors/live${e?`?device_id=${encodeURIComponent(e)}`:""}`),sensorsDeviceStatus:()=>n("/api/sensors/devices/status"),sensorsPumpControl:(e,t)=>n("/api/sensors/pump/control",{method:"POST",body:JSON.stringify({device_id:e,action:t})}),sensorsRecommendationsLive:e=>n(`/api/sensors/recommendations/live${e?`?device_id=${encodeURIComponent(e)}`:""}`),sensorsSoilAnalysisLive:e=>n(`/api/sensors/soil-analysis/live${e?`?device_id=${encodeURIComponent(e)}`:""}`),arduinoStatus:()=>n("/api/arduino/status")};export{d as a};
